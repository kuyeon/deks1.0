# Deks 1.0 하드웨어 인터페이스

## 🔧 하드웨어 인터페이스

### ESP32 S3 핀 구성
```
GPIO 4, 5, 6 → L298N 모터 드라이버 (왼쪽 모터 IN1, IN2, Enable)
GPIO 2, 3, 7 → L298N 모터 드라이버 (오른쪽 모터 IN1, IN2, Enable)
GPIO 18, 17  → 왼쪽 엔코더 A, B 채널 (17번은 인터럽트 핀)
GPIO 8, 9    → 오른쪽 엔코더 A, B 채널
GPIO 10      → 적외선 센서 (낙하 방지)
GPIO 11      → 적외선 센서 (장애물 감지)
GPIO 12      → 패시브 버저 (PWM)
GPIO 13      → 배터리 레벨 모니터링 (ADC)
GPIO 14      → 상태 LED (출력)
GPIO 35~42   → 1588AS LED 매트릭스 (개별 GPIO 제어)
GPIO 1, 0    → 시리얼 디버그 (TX, RX)
```

### 모터 제어 상세
```
왼쪽 모터:
  - IN1 핀: GPIO 4 (방향 제어 1)
  - IN2 핀: GPIO 5 (방향 제어 2)
  - Enable 핀: GPIO 6 (PWM 속도 제어)
  - 엔코더: GPIO 18, 17 (A, B 채널, 17번은 인터럽트)

오른쪽 모터:
  - IN1 핀: GPIO 2 (방향 제어 1)
  - IN2 핀: GPIO 3 (방향 제어 2)
  - Enable 핀: GPIO 7 (PWM 속도 제어)
  - 엔코더: GPIO 8, 9 (A, B 채널)
```

### 센서 연결
```
낙하 방지 센서:
  - 핀: GPIO 10 (아날로그 입력)
  - 감지 거리: 5-30cm
  - 임계값: 800 (낙하 감지 기준)
  - ADC 해상도: 12비트 (0-4095)

장애물 감지 센서:
  - 핀: GPIO 11 (아날로그 입력)
  - 감지 거리: 2-20cm
  - 임계값: 600 (장애물 감지 기준)
  - ADC 해상도: 12비트 (0-4095)

배터리 모니터링:
  - 핀: GPIO 13 (아날로그 입력)
  - 전압 범위: 0-3.3V (분압 회로 사용)
  - 경고 임계값: 3.0V
  - 위험 임계값: 2.8V
```

### LED 매트릭스 연결
```
1588AS LED 매트릭스 (8x8):
  - GPIO 35~42: 각 행(Row) 제어 (8개 핀)
  - 해상도: 8x8 픽셀 (64개 LED)
  - 제어 방식: 직접 GPIO 제어
  - 스캔 방식: 행 스캔 (Row Scanning)
  - PWM 제어: 밝기 조절 가능
```

### 버저 연결
```
패시브 버저:
  - 핀: GPIO 12 (PWM 출력)
  - PWM 주파수: 1kHz (기본)
  - 듀티 사이클: 0-1023
  - 볼륨 레벨: 5단계 (0-4)
```