# Deks 1.0 ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Wi-Fi TCP    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/WebSocket   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
|                 |                 â”‚            FastAPI Server               â”‚                     |                 |
â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Web Browser    â”‚
â”‚   ESP32 S3      â”‚                 â”‚  â”‚         REST API Layer             â”‚ â”‚                     â”‚                 â”‚
â”‚ (ë§ˆì´í¬ë¡œíŒŒì´ì¬)  â”‚                 â”‚  â”‚  â€¢ Robot Control APIs              â”‚ â”‚                     â”‚  (í”„ë¡ íŠ¸ì—”ë“œ)    â”‚
â”‚                 â”‚                 â”‚  â”‚  â€¢ Natural Language Processing     â”‚ â”‚                     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚  â€¢ User Experience APIs            â”‚ â”‚                     â”‚                 â”‚
         â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚                 â”‚
         â–¼                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚        WebSocket Layer              â”‚ â”‚                     â”‚                 â”‚
â”‚   í•˜ë“œì›¨ì–´ ì„¼ì„œ   â”‚                 â”‚  â”‚  â€¢ Real-time Communication         â”‚ â”‚                     â”‚                 â”‚
â”‚   â€¢ FIT0405 ëª¨í„° â”‚                 â”‚  â”‚  â€¢ Live Sensor Data                 â”‚ â”‚                     â”‚                 â”‚
â”‚   â€¢ ì—”ì½”ë”       â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚                 â”‚
â”‚   â€¢ ì ì™¸ì„  ì„¼ì„œ  â”‚                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚                 â”‚
â”‚   â€¢ 1588AS LED  â”‚                 â”‚  â”‚       Socket Bridge Module          â”‚ â”‚                     â”‚                 â”‚
â”‚   â€¢ íŒ¨ì‹œë¸Œ ë²„ì €  â”‚                 â”‚  â”‚  â€¢ TCP Socket Management           â”‚ â”‚                     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚  â€¢ ESP32 Communication             â”‚ â”‚                     â”‚                 â”‚
                                    â”‚  â”‚  â€¢ Message Protocol Handling       â”‚ â”‚                     â”‚                 â”‚
                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚                 â”‚
                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚                 â”‚
                                    â”‚  â”‚         Database Layer              â”‚ â”‚                     â”‚                 â”‚
                                    â”‚  â”‚  â€¢ SQLite Database                 â”‚ â”‚                     â”‚                 â”‚
                                    â”‚  â”‚  â€¢ User Analytics                  â”‚ â”‚                     â”‚                 â”‚
                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚                 â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸ êµ¬ì¡°

### 1. ESP32 S3 (ë¡œë´‡ ë‘ë‡Œ)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESP32 S3                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ë§ˆì´í¬ë¡œíŒŒì´ì¬ íŒì›¨ì–´                   â”‚
â”‚  â€¢ Wi-Fi í´ë¼ì´ì–¸íŠ¸                       â”‚
â”‚  â€¢ TCP Socket í´ë¼ì´ì–¸íŠ¸                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ì œì–´ ëª¨ë“ˆ                   â”‚
â”‚  â€¢ ëª¨í„° ì œì–´ (L298N)                     â”‚
â”‚  â€¢ ì—”ì½”ë” ì½ê¸°                           â”‚
â”‚  â€¢ ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘                       â”‚
â”‚  â€¢ ì•ˆì „ ì‹œìŠ¤í…œ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              í†µì‹  ëª¨ë“ˆ                   â”‚
â”‚  â€¢ ëª…ë ¹ ìˆ˜ì‹  ë° ì²˜ë¦¬                      â”‚
â”‚  â€¢ ì„¼ì„œ ë°ì´í„° ì „ì†¡                       â”‚
â”‚  â€¢ ìƒíƒœ ë³´ê³                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. FastAPI ì„œë²„ (í†µí•©)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            FastAPI Server               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ REST API ì—”ë“œí¬ì¸íŠ¸                    â”‚
â”‚  â€¢ WebSocket ì—°ê²° ê´€ë¦¬                    â”‚
â”‚  â€¢ ëª…ë ¹ ì²˜ë¦¬ ë° ë¼ìš°íŒ…                     â”‚
â”‚  â€¢ ì„¼ì„œ ë°ì´í„° ì €ì¥/ë¶„ì„                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              í•µì‹¬ ëª¨ë“ˆ                    â”‚
â”‚  â€¢ ë¡œë´‡ ì œì–´ API                          â”‚
â”‚  â€¢ ì„¼ì„œ ë°ì´í„° API                        â”‚
â”‚  â€¢ ëŒ€í™” ì²˜ë¦¬ API                          â”‚
â”‚  â€¢ ì±„íŒ… ìƒí˜¸ì‘ìš© API                      â”‚
â”‚  â€¢ ë§¤í•‘ ë°ì´í„° API                        â”‚
â”‚  â€¢ ìì—°ì–´ ì²˜ë¦¬ ëª¨ë“ˆ                       â”‚
â”‚  â€¢ SQLite ë°ì´í„°ë² ì´ìŠ¤                     â”‚
â”‚  â€¢ Socket Bridge ëª¨ë“ˆ (ESP32 í†µì‹ )        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Socket Bridge ëª¨ë“ˆ            â”‚
â”‚  â€¢ TCP Socket ê´€ë¦¬ (í¬íŠ¸ 8888)            â”‚
â”‚  â€¢ ESP32 ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§                â”‚
â”‚  â€¢ ë©”ì‹œì§€ í”„ë¡œí† ì½œ ì²˜ë¦¬                    â”‚
â”‚  â€¢ ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°                  â”‚
â”‚  â€¢ ëª…ë ¹ ì „ì†¡ ë° ì‘ë‹µ ì²˜ë¦¬                  â”‚
â”‚  â€¢ ì—°ê²° í’ˆì§ˆ ê´€ë¦¬                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ì›¹ í”„ë¡ íŠ¸ì—”ë“œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Web Frontend                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ HTML5 + CSS3 + JavaScript            â”‚
â”‚  â€¢ WebSocket í´ë¼ì´ì–¸íŠ¸                   â”‚
â”‚  â€¢ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸                     â”‚
â”‚  â€¢ ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì²˜ë¦¬                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              UI ì»´í¬ë„ŒíŠ¸                  â”‚
â”‚  â€¢ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤                        â”‚
â”‚  â€¢ ìì—°ì–´ ëª…ë ¹ ì…ë ¥                       â”‚
â”‚  â€¢ ë¡œë´‡ ìƒíƒœ ëª¨ë‹ˆí„°                       â”‚
â”‚  â€¢ ìˆ˜ë™ ì œì–´ íŒ¨ë„                         â”‚
â”‚  â€¢ ì„¼ì„œ ë°ì´í„° ì‹œê°í™”                      â”‚
â”‚  â€¢ ë§¤í•‘ ë·°ì–´                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë°ì´í„° íë¦„

### 1. ìì—°ì–´ ëª…ë ¹ íë¦„
```
ì‚¬ìš©ì ìì—°ì–´ ì…ë ¥ â†’ ì›¹ í”„ë¡ íŠ¸ì—”ë“œ â†’ FastAPI (ìì—°ì–´ ì²˜ë¦¬) â†’ ëª…ë ¹ ë³€í™˜ â†’ Socket Bridge ëª¨ë“ˆ â†’ TCP Socket â†’ ESP32 â†’ í•˜ë“œì›¨ì–´ ì œì–´
```

### 2. ì„¼ì„œ ë°ì´í„° íë¦„
```
í•˜ë“œì›¨ì–´ ì„¼ì„œ â†’ ESP32 â†’ TCP Socket â†’ Socket Bridge ëª¨ë“ˆ â†’ FastAPI â†’ WebSocket â†’ ì›¹ í”„ë¡ íŠ¸ì—”ë“œ â†’ UI í‘œì‹œ
```

### 3. ì•ˆì „ ì‹œìŠ¤í…œ íë¦„
```
ì„¼ì„œ ê°ì§€ â†’ ESP32 (ì¦‰ì‹œ ì²˜ë¦¬) â†’ TCP Socket â†’ Socket Bridge ëª¨ë“ˆ â†’ FastAPI (ìƒíƒœ ë³´ê³ ) â†’ ì›¹ (ì•Œë¦¼ í‘œì‹œ)
```

### 4. ëŒ€í™” ì²˜ë¦¬ íë¦„
```
ì‚¬ìš©ì ë©”ì‹œì§€ â†’ ì›¹ ì±„íŒ… â†’ FastAPI (ìì—°ì–´ íŒŒì‹±) â†’ ë¡œë´‡ ì‘ë‹µ ìƒì„± â†’ ì›¹ ì±„íŒ… í‘œì‹œ
```

## ğŸ›¡ï¸ ì•ˆì „ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë‹¤ì¸µ ì•ˆì „ êµ¬ì¡°
```
1. í•˜ë“œì›¨ì–´ ë ˆë²¨ (ESP32)
   â”œâ”€â”€ ì¦‰ì‹œ ì •ì§€ (ë‚™í•˜ ê°ì§€)
   â”œâ”€â”€ ëª¨í„° ë¸Œë ˆì´í¬
   â””â”€â”€ ë¹„ìƒ ëª¨ë“œ ì§„ì…

2. ì†Œí”„íŠ¸ì›¨ì–´ ë ˆë²¨ (FastAPI)
   â”œâ”€â”€ ì„¼ì„œ ë°ì´í„° ê²€ì¦
   â”œâ”€â”€ ëª…ë ¹ ì•ˆì „ì„± ê²€ì‚¬
   â””â”€â”€ ë¡œë´‡ ìƒíƒœ ëª¨ë‹ˆí„°ë§

3. ì‚¬ìš©ì ë ˆë²¨ (ì›¹ ì¸í„°í˜ì´ìŠ¤)
   â”œâ”€â”€ ìˆ˜ë™ ë¹„ìƒ ì •ì§€ ë²„íŠ¼
   â”œâ”€â”€ ìœ„í—˜ ìƒíƒœ ì•Œë¦¼
   â””â”€â”€ ë¡œë´‡ ìƒíƒœ ì‹¤ì‹œê°„ í‘œì‹œ
```

## ğŸ¤– ìì—°ì–´ ì²˜ë¦¬ ì•„í‚¤í…ì²˜

### ê·œì¹™ ê¸°ë°˜ ëª…ë ¹ íŒŒì‹± ì‹œìŠ¤í…œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ìì—°ì–´ ì…ë ¥ ì²˜ë¦¬                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ (ì†Œë¬¸ì ë³€í™˜, ê³µë°± ì œê±°)  â”‚
â”‚  â€¢ í‚¤ì›Œë“œ ë§¤ì¹­                          â”‚
â”‚  â€¢ ì˜ë„ ë¶„ë¥˜                           â”‚
â”‚  â€¢ ëª…ë ¹ ê²€ì¦                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         ì§€ì› ëª…ë ¹ì–´ íŒ¨í„´                  â”‚
â”‚  â€¢ move_forward: ["ì•ìœ¼ë¡œ", "ì „ì§„", ...] â”‚
â”‚  â€¢ turn_left: ["ì™¼ìª½", "ì¢ŒíšŒì „", ...]    â”‚
â”‚  â€¢ turn_right: ["ì˜¤ë¥¸ìª½", "ìš°íšŒì „", ...] â”‚
â”‚  â€¢ stop: ["ì •ì§€", "ë©ˆì¶°", ...]          â”‚
â”‚  â€¢ spin: ["ë¹™ê¸€ë¹™ê¸€", "ëŒì•„", ...]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ëª…ë ¹ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
```
1. ìì—°ì–´ ì…ë ¥ ìˆ˜ì‹ 
   â†“
2. í…ìŠ¤íŠ¸ ì •ê·œí™” (ì†Œë¬¸ì, ê³µë°± ì²˜ë¦¬)
   â†“
3. íŒ¨í„´ ë§¤ì¹­ (í‚¤ì›Œë“œ ê²€ìƒ‰)
   â†“
4. ì˜ë„ ë¶„ë¥˜ (ê°€ì¥ ë†’ì€ ì‹ ë¢°ë„ ì„ íƒ)
   â†“
5. ëª…ë ¹ ë³€í™˜ (JSON í˜•ì‹)
   â†“
6. ë¡œë´‡ ì œì–´ ëª…ë ¹ ì „ì†¡
```

### ì‘ë‹µ ìƒì„± ì‹œìŠ¤í…œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ì‘ë‹µ ìƒì„± ëª¨ë“ˆ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ì„±ê³µ ì‘ë‹µ: "ì•ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!"        â”‚
â”‚  â€¢ ì‹¤íŒ¨ ì‘ë‹µ: "ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤"        â”‚
â”‚  â€¢ ì•ˆì „ ì•Œë¦¼: "ë‚™í•˜ ê°ì§€! ì •ì§€í•©ë‹ˆë‹¤!"     â”‚
â”‚  â€¢ ìƒíƒœ ë³´ê³ : "í˜„ì¬ ìœ„ì¹˜: (10, 20)"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜

### SQLite ê¸°ë°˜ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ ì‹œìŠ¤í…œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            SQLite Database              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ user_interactions                    â”‚
â”‚  â€¢ command_frequency                    â”‚
â”‚  â€¢ error_patterns                       â”‚
â”‚  â€¢ emotion_responses                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ë°ì´í„° ì²˜ë¦¬ ëª¨ë“ˆ                â”‚
â”‚  â€¢ ì‚¬ìš©ì íŒ¨í„´ ë¶„ì„                      â”‚
â”‚  â€¢ ëª…ë ¹ì–´ í•™ìŠµ ì‹œìŠ¤í…œ                     â”‚
â”‚  â€¢ ìŠ¤ë§ˆíŠ¸ ì œì•ˆ ì—”ì§„                      â”‚
â”‚  â€¢ ì—ëŸ¬ íŒ¨í„´ ë¶„ì„                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„ (ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ)
```
ì‚¬ìš©ì ëª…ë ¹ â†’ ìì—°ì–´ ì²˜ë¦¬ â†’ SQLite ì €ì¥ â†’ íŒ¨í„´ ë¶„ì„ â†’ ê°œì¸í™”ëœ ì œì•ˆ
     â†“              â†“           â†“           â†“
ëª…ë ¹ ì‹¤í–‰ â†’ ê²°ê³¼ ì €ì¥ â†’ ë¹ˆë„ ì—…ë°ì´íŠ¸ â†’ í•™ìŠµ ë°ì´í„° â†’ í–¥í›„ ê°œì„ 
```

### ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë“ˆ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Database Manager                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Connection Pool                      â”‚
â”‚  â€¢ Query Builder                        â”‚
â”‚  â€¢ Data Validation                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Analytics Engine                â”‚
â”‚  â€¢ Pattern Recognition                  â”‚
â”‚  â€¢ Frequency Analysis                   â”‚
â”‚  â€¢ Error Pattern Detection              â”‚
â”‚  â€¢ User Preference Learning             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Recommendation System           â”‚
â”‚  â€¢ Smart Suggestions                    â”‚
â”‚  â€¢ Personalized Commands                â”‚
â”‚  â€¢ Context-Aware Responses              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¬ ì±„íŒ… ìƒí˜¸ì‘ìš© ëª¨ë“ˆ êµ¬ì¡°

### ì±„íŒ… ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Chat Interaction Module         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Message Processing                   â”‚
â”‚  â€¢ Context Management                   â”‚
â”‚  â€¢ Emotion State Tracking               â”‚
â”‚  â€¢ Conversation History                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Natural Language Processing     â”‚
â”‚  â€¢ Intent Recognition                   â”‚
â”‚  â€¢ Emotion Analysis                     â”‚
â”‚  â€¢ Context Understanding                â”‚
â”‚  â€¢ Response Generation                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Conversation Manager            â”‚
â”‚  â€¢ Session Management                   â”‚
â”‚  â€¢ User Profile Tracking                â”‚
â”‚  â€¢ Conversation Flow Control            â”‚
â”‚  â€¢ Learning from Interactions           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Response Engine                 â”‚
â”‚  â€¢ Template-based Responses             â”‚
â”‚  â€¢ Dynamic Response Generation          â”‚
â”‚  â€¢ Personality Adaptation               â”‚
â”‚  â€¢ Multi-turn Conversation Support      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì±„íŒ… ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Chat Database                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ chat_conversations                   â”‚
â”‚    - conversation_id                    â”‚
â”‚    - user_id                           â”‚
â”‚    - session_id                        â”‚
â”‚    - start_time                        â”‚
â”‚    - end_time                          â”‚
â”‚    - conversation_type                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ chat_messages                       â”‚
â”‚    - message_id                        â”‚
â”‚    - conversation_id                   â”‚
â”‚    - user_message                      â”‚
â”‚    - robot_response                    â”‚
â”‚    - emotion_detected                  â”‚
â”‚    - emotion_responded                 â”‚
â”‚    - timestamp                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ user_profiles                       â”‚
â”‚    - user_id                           â”‚
â”‚    - user_name                         â”‚
â”‚    - preferred_style                   â”‚
â”‚    - conversation_history_count        â”‚
â”‚    - last_interaction                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ chat_contexts                       â”‚
â”‚    - context_id                        â”‚
â”‚    - user_id                           â”‚
â”‚    - session_id                        â”‚
â”‚    - current_topic                     â”‚
â”‚    - robot_mood                        â”‚
â”‚    - remembered_info                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì±„íŒ… ë°ì´í„° íë¦„
```
ì‚¬ìš©ì ë©”ì‹œì§€ â†’ ì˜ë„ ë¶„ì„ â†’ ê°ì • ë¶„ì„ â†’ ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ â†’ ì‘ë‹µ ìƒì„± â†’ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
     â†“              â†“           â†“           â†“            â†“           â†“
ë¡œê·¸ ì €ì¥ â†’ íŒ¨í„´ í•™ìŠµ â†’ ê°œì¸í™” â†’ ëŒ€í™” ê¸°ë¡ â†’ ê°ì • ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ ë‹¤ìŒ ëŒ€í™” ì¤€ë¹„
```

### ì±„íŒ… ì‹œë‚˜ë¦¬ì˜¤ ì²˜ë¦¬ íë¦„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Scenario Handler                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ë©”ì‹œì§€ ë¶„ë¥˜                         â”‚
â”‚     â€¢ ì¸ì‚¬ë§ (greeting)                 â”‚
â”‚     â€¢ ìê¸°ì†Œê°œ (introduction)           â”‚
â”‚     â€¢ ì§ˆë¬¸ (question)                   â”‚
â”‚     â€¢ ëª…ë ¹ (command)                    â”‚
â”‚     â€¢ ì‘ë³„ì¸ì‚¬ (farewell)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ì‘ë‹µ                  â”‚
â”‚     â€¢ ì‚¬ìš©ì ì´ë¦„ ê¸°ì–µ                  â”‚
â”‚     â€¢ ì´ì „ ëŒ€í™” ë‚´ìš© ì°¸ì¡°               â”‚
â”‚     â€¢ ê°ì • ìƒíƒœ ë°˜ì˜                    â”‚
â”‚     â€¢ ê°œì¸í™”ëœ ìŠ¤íƒ€ì¼ ì ìš©              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. í•™ìŠµ ë° ê°œì„                         â”‚
â”‚     â€¢ ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘                â”‚
â”‚     â€¢ ëŒ€í™” íŒ¨í„´ ë¶„ì„                    â”‚
â”‚     â€¢ ì‘ë‹µ í’ˆì§ˆ ê°œì„                     â”‚
â”‚     â€¢ ê°œì¸í™” ë ˆë²¨ í–¥ìƒ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

### ì‹¤ì‹œê°„ì„±
- **ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘**: 50Hz (20ms ê°„ê²©)
- **ëª…ë ¹ ì‘ë‹µ ì‹œê°„**: < 100ms
- **ì•ˆì „ ì‹œìŠ¤í…œ ì‘ë‹µ**: < 10ms
- **ìì—°ì–´ ì²˜ë¦¬**: < 50ms

### ë„¤íŠ¸ì›Œí¬
- **Wi-Fi ì—°ê²°**: 2.4GHz
- **ë°ì´í„° ì „ì†¡ëŸ‰**: ~1KB/s
- **ì—°ê²° ì•ˆì •ì„±**: ìë™ ì¬ì—°ê²° ì§€ì›

## ğŸ§  TinyML ì•„í‚¤í…ì²˜ (7ìˆœìœ„ ê³„íš)

### ì „ì²´ TinyML ì‹œìŠ¤í…œ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TinyML ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë°ì´í„° ìˆ˜ì§‘ ë° í•™ìŠµ      â”‚      â”‚    ëª¨ë¸ ë°°í¬ íŒŒì´í”„ë¼ì¸    â”‚      â”‚   ì˜¨ë””ë°”ì´ìŠ¤ ì¶”ë¡   â”‚
â”‚      (PC/Server)        â”‚      â”‚        (PC)              â”‚      â”‚     (ESP32)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚      â”‚                          â”‚      â”‚                  â”‚
â”‚ 1. ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘       â”‚â”€â”€â”€â”€â”€â–ºâ”‚ 4. ëª¨ë¸ ìµœì í™”           â”‚â”€â”€â”€â”€â”€â–ºâ”‚ 6. ëª¨ë¸ ë¡œë”©     â”‚
â”‚    â€¢ ESP32 â†’ Server     â”‚      â”‚    â€¢ Quantization        â”‚      â”‚    â€¢ í”Œë˜ì‹œ ì½ê¸°  â”‚
â”‚    â€¢ SQLite ì €ì¥        â”‚      â”‚    â€¢ Pruning             â”‚      â”‚                  â”‚
â”‚                         â”‚      â”‚                          â”‚      â”‚ 7. ì¶”ë¡  ì‹¤í–‰     â”‚
â”‚ 2. ë°ì´í„° ì „ì²˜ë¦¬         â”‚      â”‚ 5. TFLite ë³€í™˜           â”‚      â”‚    â€¢ ì„¼ì„œ ì…ë ¥   â”‚
â”‚    â€¢ ì •ê·œí™”             â”‚      â”‚    â€¢ .h5 â†’ .tflite       â”‚      â”‚    â€¢ ì¶”ë¡  ê²°ê³¼   â”‚
â”‚    â€¢ ë¼ë²¨ë§             â”‚      â”‚    â€¢ ëª¨ë¸ ê²€ì¦           â”‚      â”‚                  â”‚
â”‚                         â”‚      â”‚    â€¢ .cc íŒŒì¼ ìƒì„±       â”‚      â”‚ 8. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ â”‚
â”‚ 3. ëª¨ë¸ í•™ìŠµ            â”‚      â”‚                          â”‚      â”‚    â€¢ ì§€ì—°ì‹œê°„    â”‚
â”‚    â€¢ TensorFlow/Keras   â”‚      â”‚                          â”‚      â”‚    â€¢ ë©”ëª¨ë¦¬      â”‚
â”‚    â€¢ ëª¨ë¸ í‰ê°€          â”‚      â”‚                          â”‚      â”‚    â€¢ ì •í™•ë„      â”‚
â”‚                         â”‚      â”‚                          â”‚      â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚                              â”‚
         â”‚                                  â”‚                              â”‚
         â–¼                                  â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë°ì´í„°ë² ì´ìŠ¤           â”‚      â”‚   ëª¨ë¸ ì €ì¥ì†Œ             â”‚      â”‚   í”¼ë“œë°± ìˆ˜ì§‘     â”‚
â”‚   â€¢ ì„¼ì„œ ë¡œê·¸           â”‚      â”‚   â€¢ .tflite íŒŒì¼          â”‚      â”‚   â€¢ ì˜¤ë‹µ ì¼€ì´ìŠ¤   â”‚
â”‚   â€¢ ì¶”ë¡  ê²°ê³¼           â”‚      â”‚   â€¢ ëª¨ë¸ ë©”íƒ€ë°ì´í„°       â”‚      â”‚   â€¢ ì¬í•™ìŠµ ë°ì´í„° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1ë‹¨ê³„: ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ ì‹œìŠ¤í…œ                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ESP32 ì„¼ì„œ          â†’      Socket Bridge      â†’       FastAPI          â†’     SQLite
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„¼ì„œ ì½ê¸°     â”‚          â”‚ TCP ìˆ˜ì‹       â”‚          â”‚ ë°ì´í„° ê²€ì¦   â”‚        â”‚ ì„¼ì„œ ë¡œê·¸ â”‚
â”‚ â€¢ IR ì„¼ì„œ    â”‚  JSON    â”‚ â€¢ í¬íŠ¸ 8888   â”‚   REST   â”‚ â€¢ íƒ€ì… ì²´í¬  â”‚   SQL  â”‚ í…Œì´ë¸”    â”‚
â”‚ â€¢ ì—”ì½”ë”     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ë©”ì‹œì§€ í   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ë²”ìœ„ ê²€ì¦  â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
â”‚ â€¢ ë°°í„°ë¦¬     â”‚  {data}  â”‚              â”‚          â”‚              â”‚        â”‚ â€¢ íƒ€ì„ìŠ¤íƒ¬í”„ â”‚
â”‚              â”‚          â”‚ í”„ë¡œí† ì½œ íŒŒì‹± â”‚          â”‚ ë¼ë²¨ë§       â”‚        â”‚ â€¢ ì„¼ì„œê°’   â”‚
â”‚ 50Hz ìƒ˜í”Œë§  â”‚          â”‚ â€¢ Type: data â”‚          â”‚ â€¢ ìƒí™© ë¶„ë¥˜  â”‚        â”‚ â€¢ ë¼ë²¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œí† ì½œ
```python
# ESP32 â†’ Server ì„¼ì„œ ë°ì´í„° ì „ì†¡
{
    "type": "sensor_data",
    "timestamp": 1696780800000,
    "data": {
        "ir_front": 512,          # ì ì™¸ì„  ì„¼ì„œ (0~1023)
        "ir_edge": 800,           # ë‚™í•˜ ê°ì§€ ì„¼ì„œ
        "encoder_left": 120,      # ì™¼ìª½ ì—”ì½”ë” ì†ë„ (RPM)
        "encoder_right": 118,     # ì˜¤ë¥¸ìª½ ì—”ì½”ë” ì†ë„
        "battery_voltage": 7.4,   # ë°°í„°ë¦¬ ì „ì••
        "current_direction": 0,   # ì´ë™ ë°©í–¥ (0:ì „ì§„, 1:ì¢ŒíšŒì „, 2:ìš°íšŒì „, 3:ì •ì§€)
        "surface_friction": 0.8   # í‘œë©´ ë§ˆì°° ì¶”ì •ì¹˜
    },
    "label": "normal"             # ë¼ë²¨ (normal, fall_risk, obstacle, low_battery)
}

# Server â†’ SQLite ì €ì¥
CREATE TABLE ml_sensor_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    ir_front REAL,
    ir_edge REAL,
    encoder_left REAL,
    encoder_right REAL,
    battery_voltage REAL,
    current_direction INTEGER,
    surface_friction REAL,
    label TEXT,
    fall_occurred BOOLEAN DEFAULT 0,
    session_id TEXT
);
```

### 2ë‹¨ê³„: ëª¨ë¸ í•™ìŠµ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ëª¨ë¸ í•™ìŠµ íŒŒì´í”„ë¼ì¸ (PC)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ë°ì´í„° ë¡œë“œ              2. ì „ì²˜ë¦¬                3. ëª¨ë¸ í•™ìŠµ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLite ì¿¼ë¦¬  â”‚          â”‚ ì •ê·œí™”       â”‚          â”‚ TensorFlow   â”‚
â”‚ SELECT *     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Min-Max    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Keras API  â”‚
â”‚ FROM logs    â”‚          â”‚ â€¢ Z-Score    â”‚          â”‚ â€¢ ëª¨ë¸ ì •ì˜  â”‚
â”‚              â”‚          â”‚              â”‚          â”‚ â€¢ Compile    â”‚
â”‚ Pandas       â”‚          â”‚ ë°ì´í„° ë¶„í•   â”‚          â”‚ â€¢ Fit        â”‚
â”‚ DataFrame    â”‚          â”‚ â€¢ Train 80%  â”‚          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â€¢ Val 10%    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ â€¢ Test 10%   â”‚                 â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
                                                          â”‚
4. ëª¨ë¸ í‰ê°€              â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì •í™•ë„ ì¸¡ì •  â”‚
â”‚ â€¢ Accuracy   â”‚
â”‚ â€¢ Precision  â”‚
â”‚ â€¢ Recall     â”‚
â”‚ â€¢ F1-Score   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
5. ëª¨ë¸ ì €ì¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .h5 íŒŒì¼     â”‚
â”‚ â€¢ ê°€ì¤‘ì¹˜     â”‚
â”‚ â€¢ êµ¬ì¡°       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í•™ìŠµ ì½”ë“œ ì˜ˆì‹œ
```python
# backend/ml/train_fall_detection.py

import tensorflow as tf
from tensorflow import keras
import pandas as pd
import numpy as np
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler

# 1. ë°ì´í„° ë¡œë“œ
def load_training_data():
    """SQLiteì—ì„œ í•™ìŠµ ë°ì´í„° ë¡œë“œ"""
    import sqlite3
    conn = sqlite3.connect('deks.db')
    df = pd.read_sql_query("""
        SELECT ir_front, ir_edge, encoder_left, encoder_right,
               current_direction, surface_friction, fall_occurred
        FROM ml_sensor_logs
        WHERE label IS NOT NULL
    """, conn)
    conn.close()
    return df

# 2. ë°ì´í„° ì „ì²˜ë¦¬
def preprocess_data(df):
    """ë°ì´í„° ì •ê·œí™” ë° ë¶„í• """
    X = df[['ir_front', 'ir_edge', 'encoder_left', 'encoder_right', 
            'current_direction']].values
    y = df['fall_occurred'].values
    
    # ì •ê·œí™”
    scaler = StandardScaler()
    X_scaled = scaler.fit_transform(X)
    
    # ë¶„í• 
    X_train, X_test, y_train, y_test = train_test_split(
        X_scaled, y, test_size=0.2, random_state=42
    )
    
    return X_train, X_test, y_train, y_test, scaler

# 3. ëª¨ë¸ ì •ì˜
def create_model(input_shape):
    """ê²½ëŸ‰ ë‚™í•˜ ì˜ˆì¸¡ ëª¨ë¸"""
    model = keras.Sequential([
        keras.layers.Input(shape=(input_shape,)),
        keras.layers.Dense(16, activation='relu'),
        keras.layers.Dense(8, activation='relu'),
        keras.layers.Dense(1, activation='sigmoid')
    ])
    
    model.compile(
        optimizer='adam',
        loss='binary_crossentropy',
        metrics=['accuracy', 'precision', 'recall']
    )
    
    return model

# 4. í•™ìŠµ ì‹¤í–‰
def train_model():
    df = load_training_data()
    X_train, X_test, y_train, y_test, scaler = preprocess_data(df)
    
    model = create_model(input_shape=5)
    
    # í•™ìŠµ
    history = model.fit(
        X_train, y_train,
        validation_split=0.1,
        epochs=50,
        batch_size=32,
        verbose=1
    )
    
    # í‰ê°€
    loss, acc, prec, rec = model.evaluate(X_test, y_test)
    print(f"ì •í™•ë„: {acc:.4f}, ì •ë°€ë„: {prec:.4f}, ì¬í˜„ìœ¨: {rec:.4f}")
    
    # ì €ì¥
    model.save('models/fall_detection.h5')
    
    return model, scaler
```

### 3ë‹¨ê³„: ëª¨ë¸ ìµœì í™” ë° ë³€í™˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ëª¨ë¸ ìµœì í™” íŒŒì´í”„ë¼ì¸                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

.h5 ëª¨ë¸           â†’      ì–‘ìí™”(Quantization)    â†’      TFLite ë³€í™˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì›ë³¸ ëª¨ë¸     â”‚          â”‚ INT8 ì–‘ìí™”       â”‚          â”‚ .tflite íŒŒì¼ â”‚
â”‚ â€¢ FP32 ê°€ì¤‘ì¹˜ â”‚          â”‚ â€¢ 8-bit ì •ìˆ˜      â”‚          â”‚ â€¢ í¬ê¸° 1/4   â”‚
â”‚ â€¢ í¬ê¸°: 200KB â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Representative  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ 50KB       â”‚
â”‚              â”‚          â”‚   Dataset ì‚¬ìš©    â”‚          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â€¢ ì •í™•ë„ ì†ì‹¤ <1% â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
                                                              â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                          â”‚ C++ ë°°ì—´ ë³€í™˜    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ â€¢ xxd ë„êµ¬ ì‚¬ìš©  â”‚
                          â”‚ â€¢ .cc íŒŒì¼ ìƒì„±  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ëª¨ë¸ ë³€í™˜ ì½”ë“œ
```python
# backend/ml/convert_to_tflite.py

import tensorflow as tf
import numpy as np

def convert_to_tflite(model_path, output_path):
    """ëª¨ë¸ì„ TFLiteë¡œ ë³€í™˜ ë° ì–‘ìí™”"""
    
    # 1. ëª¨ë¸ ë¡œë“œ
    model = tf.keras.models.load_model(model_path)
    
    # 2. Representative Dataset (ì–‘ìí™”ìš© ìƒ˜í”Œ ë°ì´í„°)
    def representative_dataset_gen():
        """ì–‘ìí™”ë¥¼ ìœ„í•œ ëŒ€í‘œ ë°ì´í„°ì…‹"""
        import sqlite3
        conn = sqlite3.connect('deks.db')
        cursor = conn.execute("""
            SELECT ir_front, ir_edge, encoder_left, encoder_right, current_direction
            FROM ml_sensor_logs LIMIT 100
        """)
        
        for row in cursor:
            data = np.array(row, dtype=np.float32).reshape(1, -1)
            yield [data]
        
        conn.close()
    
    # 3. TFLite ë³€í™˜ê¸° ì„¤ì •
    converter = tf.lite.TFLiteConverter.from_keras_model(model)
    
    # INT8 ì–‘ìí™” í™œì„±í™”
    converter.optimizations = [tf.lite.Optimize.DEFAULT]
    converter.representative_dataset = representative_dataset_gen
    converter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]
    converter.inference_input_type = tf.int8
    converter.inference_output_type = tf.int8
    
    # 4. ë³€í™˜ ì‹¤í–‰
    tflite_model = converter.convert()
    
    # 5. .tflite íŒŒì¼ ì €ì¥
    with open(output_path, 'wb') as f:
        f.write(tflite_model)
    
    # 6. ëª¨ë¸ í¬ê¸° ì¶œë ¥
    import os
    size_kb = os.path.getsize(output_path) / 1024
    print(f"ë³€í™˜ ì™„ë£Œ: {output_path} ({size_kb:.2f} KB)")
    
    return tflite_model

def convert_to_c_array(tflite_path, output_cc_path):
    """TFLite ëª¨ë¸ì„ C++ ë°°ì—´ë¡œ ë³€í™˜"""
    import subprocess
    
    # xxd ëª…ë ¹ì–´ë¡œ .tflite â†’ .cc ë³€í™˜
    # xxd -i model.tflite > model_data.cc
    with open(tflite_path, 'rb') as f:
        tflite_data = f.read()
    
    # C++ í—¤ë” ìƒì„±
    with open(output_cc_path, 'w') as f:
        f.write('// Auto-generated model data\n')
        f.write('#include <cstdint>\n\n')
        f.write('alignas(16) const unsigned char fall_detection_model[] = {\n')
        
        # 16ì§„ìˆ˜ ë°°ì—´ë¡œ ë³€í™˜
        for i, byte in enumerate(tflite_data):
            if i % 12 == 0:
                f.write('  ')
            f.write(f'0x{byte:02x}, ')
            if (i + 1) % 12 == 0:
                f.write('\n')
        
        f.write('\n};\n')
        f.write(f'const int fall_detection_model_len = {len(tflite_data)};\n')
    
    print(f"C++ ë°°ì—´ ìƒì„± ì™„ë£Œ: {output_cc_path}")

# ì‹¤í–‰
if __name__ == "__main__":
    convert_to_tflite('models/fall_detection.h5', 'models/fall_detection.tflite')
    convert_to_c_array('models/fall_detection.tflite', 'firmware/model_data.cc')
```

### 4ë‹¨ê³„: ESP32 í”Œë˜ì‹œ ë©”ëª¨ë¦¬ ì—…ë¡œë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ESP32 í”Œë˜ì‹œ ë©”ëª¨ë¦¬ ëª¨ë¸ ë°°í¬                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê°œë°œ PC                     USB ì—°ê²°              ESP32 S3 í”Œë˜ì‹œ ë©”ëª¨ë¦¬
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .tflite íŒŒì¼ â”‚          â”‚ esptool.py   â”‚          â”‚ í”Œë˜ì‹œ ë ˆì´ì•„ì›ƒ   â”‚
â”‚ â€¢ 50KB       â”‚          â”‚ â€¢ ì§ë ¬ í†µì‹   â”‚          â”‚                  â”‚
â”‚              â”‚  Upload  â”‚ â€¢ í”Œë˜ì‹œ ì“°ê¸°â”‚   Write  â”‚ 0x000000: ë¶€íŠ¸ë¡œë”â”‚
â”‚ model_data.  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 0x010000: íŒì›¨ì–´  â”‚
â”‚   cc         â”‚          â”‚ mpremote     â”‚          â”‚ 0x3C0000: ëª¨ë¸    â”‚
â”‚              â”‚          â”‚ â€¢ íŒŒì¼ ì „ì†¡  â”‚          â”‚   (50KB)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
                          â”‚ íŒŒì¼ì‹œìŠ¤í…œ    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ /models/     â”‚
                          â”‚   fall.tfliteâ”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ESP32 ëª¨ë¸ ì—…ë¡œë“œ ë°©ë²•

**ë°©ë²• 1: mpremote ì‚¬ìš© (ê¶Œì¥)**
```bash
# 1. .tflite íŒŒì¼ì„ ESP32 íŒŒì¼ì‹œìŠ¤í…œì— ë³µì‚¬
mpremote fs cp models/fall_detection.tflite :/models/fall_detection.tflite

# 2. ì—…ë¡œë“œ í™•ì¸
mpremote fs ls /models/

# 3. íŒŒì¼ í¬ê¸° í™•ì¸
mpremote exec "import os; print(os.stat('/models/fall_detection.tflite'))"
```

**ë°©ë²• 2: MicroPython ì½”ë“œë¡œ ì§ì ‘ í¬í•¨**
```python
# firmware/ml_model.py
# C++ ë°°ì—´ì„ Python bytesë¡œ ë³€í™˜í•˜ì—¬ í¬í•¨

MODEL_DATA = bytes([
    0x1c, 0x00, 0x00, 0x00, 0x54, 0x46, 0x4c, 0x33,  # TFLite í—¤ë”
    # ... (ëª¨ë¸ ë°ì´í„° ê³„ì†)
])

def get_model():
    """ëª¨ë¸ ë°ì´í„° ë°˜í™˜"""
    return MODEL_DATA
```

**ë°©ë²• 3: OTA (Over-the-Air) ì—…ë°ì´íŠ¸**
```python
# firmware/ota_update.py
import urequests
import os

def download_model(model_url, local_path):
    """ì„œë²„ì—ì„œ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ"""
    print("ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì‹œì‘...")
    
    response = urequests.get(model_url)
    if response.status_code == 200:
        with open(local_path, 'wb') as f:
            f.write(response.content)
        print(f"ëª¨ë¸ ì €ì¥ ì™„ë£Œ: {local_path}")
        return True
    else:
        print(f"ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: {response.status_code}")
        return False

# ì‚¬ìš© ì˜ˆì‹œ
# download_model('http://192.168.1.100:8000/models/fall_detection.tflite', 
#                '/models/fall_detection.tflite')
```

### 5ë‹¨ê³„: TFLite Micro ì¶”ë¡  ì‹¤í–‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ESP32 TFLite Micro ì¶”ë¡  ì•„í‚¤í…ì²˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì„¼ì„œ ì…ë ¥          â†’      ì „ì²˜ë¦¬              â†’      ì¶”ë¡  ì—”ì§„           â†’      ê²°ê³¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„¼ì„œ ì½ê¸°     â”‚          â”‚ ì •ê·œí™”       â”‚          â”‚ TFLite Micro â”‚          â”‚ ìœ„í—˜ë„ â”‚
â”‚ IR: 512      â”‚   Raw    â”‚ â€¢ Min-Max    â”‚  Tensor  â”‚ â€¢ ëª¨ë¸ ë¡œë“œ  â”‚  Output  â”‚ 0.85   â”‚
â”‚ Enc_L: 120   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ë°°ì—´ ë³€í™˜  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Invoke     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚        â”‚
â”‚ Enc_R: 118   â”‚          â”‚              â”‚          â”‚ â€¢ ì¶”ë¡  ì‹¤í–‰  â”‚          â”‚ í–‰ë™   â”‚
â”‚ Dir: 0       â”‚          â”‚ ì…ë ¥ ë²„í¼    â”‚          â”‚              â”‚          â”‚ STOP   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ float32[5]   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
                                                          â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ ë©”ëª¨ë¦¬ ê´€ë¦¬       â”‚
                â”‚ â€¢ ì…ë ¥ í…ì„œ       â”‚
                â”‚ â€¢ ì¶œë ¥ í…ì„œ       â”‚
                â”‚ â€¢ Arena (20KB)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ESP32 ì¶”ë¡  ì½”ë“œ (MicroPython)

**C ëª¨ë“ˆ ë°©ì‹ (TFLite Micro C++)**
```cpp
// firmware/tflite_inference.cpp

#include "tensorflow/lite/micro/all_ops_resolver.h"
#include "tensorflow/lite/micro/micro_error_reporter.h"
#include "tensorflow/lite/micro/micro_interpreter.h"
#include "tensorflow/lite/schema/schema_generated.h"
#include "model_data.h"  // ëª¨ë¸ ë°ì´í„°

namespace {
    tflite::ErrorReporter* error_reporter = nullptr;
    const tflite::Model* model = nullptr;
    tflite::MicroInterpreter* interpreter = nullptr;
    TfLiteTensor* input = nullptr;
    TfLiteTensor* output = nullptr;
    
    // 20KB Arena (ì‘ì—… ë©”ëª¨ë¦¬)
    constexpr int kTensorArenaSize = 20 * 1024;
    uint8_t tensor_arena[kTensorArenaSize];
}

// ì´ˆê¸°í™”
void setup_tflite() {
    // ì—ëŸ¬ ë¦¬í¬í„° ì„¤ì •
    static tflite::MicroErrorReporter micro_error_reporter;
    error_reporter = &micro_error_reporter;
    
    // ëª¨ë¸ ë¡œë“œ
    model = tflite::GetModel(fall_detection_model);
    if (model->version() != TFLITE_SCHEMA_VERSION) {
        error_reporter->Report("ëª¨ë¸ ë²„ì „ ë¶ˆì¼ì¹˜!");
        return;
    }
    
    // Ops Resolver (ì—°ì‚°ì ë“±ë¡)
    static tflite::AllOpsResolver resolver;
    
    // ì¸í„°í”„ë¦¬í„° ìƒì„±
    static tflite::MicroInterpreter static_interpreter(
        model, resolver, tensor_arena, kTensorArenaSize, error_reporter
    );
    interpreter = &static_interpreter;
    
    // í…ì„œ í• ë‹¹
    TfLiteStatus allocate_status = interpreter->AllocateTensors();
    if (allocate_status != kTfLiteOk) {
        error_reporter->Report("í…ì„œ í• ë‹¹ ì‹¤íŒ¨!");
        return;
    }
    
    // ì…ë ¥/ì¶œë ¥ í…ì„œ íšë“
    input = interpreter->input(0);
    output = interpreter->output(0);
    
    Serial.println("TFLite Micro ì´ˆê¸°í™” ì™„ë£Œ");
}

// ì¶”ë¡  ì‹¤í–‰
float predict_fall_risk(float ir_front, float ir_edge, 
                       float encoder_left, float encoder_right, 
                       int direction) {
    // ì…ë ¥ ë°ì´í„° ì •ê·œí™” ë° ì„¤ì •
    input->data.f[0] = (ir_front - 512.0) / 512.0;        // ì •ê·œí™”
    input->data.f[1] = (ir_edge - 512.0) / 512.0;
    input->data.f[2] = (encoder_left - 100.0) / 50.0;
    input->data.f[3] = (encoder_right - 100.0) / 50.0;
    input->data.f[4] = (float)direction / 3.0;
    
    // ì¶”ë¡  ì‹¤í–‰
    TfLiteStatus invoke_status = interpreter->Invoke();
    if (invoke_status != kTfLiteOk) {
        error_reporter->Report("ì¶”ë¡  ì‹¤íŒ¨!");
        return -1.0;
    }
    
    // ê²°ê³¼ ë°˜í™˜ (ë‚™í•˜ ìœ„í—˜ë„ 0.0 ~ 1.0)
    float fall_risk = output->data.f[0];
    return fall_risk;
}
```

**MicroPython ë˜í¼ (ì‹¤í—˜ì )**
```python
# firmware/ml_inference.py
import machine
import time

class FallDetectionModel:
    """ë‚™í•˜ ìœ„í—˜ ì˜ˆì¸¡ ëª¨ë¸"""
    
    def __init__(self, model_path='/models/fall_detection.tflite'):
        self.model_path = model_path
        self.model = None
        self.interpreter = None
        self.load_model()
    
    def load_model(self):
        """ëª¨ë¸ ë¡œë“œ (C ëª¨ë“ˆ ì‚¬ìš©)"""
        try:
            import tflite_runtime.interpreter as tflite
            self.interpreter = tflite.Interpreter(model_path=self.model_path)
            self.interpreter.allocate_tensors()
            
            # ì…ë ¥/ì¶œë ¥ ì •ë³´
            self.input_details = self.interpreter.get_input_details()
            self.output_details = self.interpreter.get_output_details()
            
            print("ëª¨ë¸ ë¡œë“œ ì™„ë£Œ")
            print(f"ì…ë ¥ shape: {self.input_details[0]['shape']}")
            print(f"ì¶œë ¥ shape: {self.output_details[0]['shape']}")
            
        except Exception as e:
            print(f"ëª¨ë¸ ë¡œë“œ ì‹¤íŒ¨: {e}")
    
    def normalize_input(self, ir_front, ir_edge, encoder_left, encoder_right, direction):
        """ì…ë ¥ ë°ì´í„° ì •ê·œí™”"""
        import array
        
        # Min-Max ì •ê·œí™” (í•™ìŠµ ì‹œì™€ ë™ì¼í•œ ë°©ì‹)
        normalized = array.array('f', [
            (ir_front - 512.0) / 512.0,
            (ir_edge - 512.0) / 512.0,
            (encoder_left - 100.0) / 50.0,
            (encoder_right - 100.0) / 50.0,
            float(direction) / 3.0
        ])
        
        return normalized
    
    def predict(self, ir_front, ir_edge, encoder_left, encoder_right, direction):
        """ë‚™í•˜ ìœ„í—˜ë„ ì˜ˆì¸¡"""
        start_time = time.ticks_ms()
        
        # ì…ë ¥ ì •ê·œí™”
        input_data = self.normalize_input(ir_front, ir_edge, encoder_left, 
                                          encoder_right, direction)
        
        # ì…ë ¥ í…ì„œ ì„¤ì •
        self.interpreter.set_tensor(self.input_details[0]['index'], [input_data])
        
        # ì¶”ë¡  ì‹¤í–‰
        self.interpreter.invoke()
        
        # ê²°ê³¼ íšë“
        output_data = self.interpreter.get_tensor(self.output_details[0]['index'])
        fall_risk = float(output_data[0][0])
        
        # ì¶”ë¡  ì‹œê°„ ì¸¡ì •
        inference_time = time.ticks_diff(time.ticks_ms(), start_time)
        
        print(f"ì¶”ë¡  ì™„ë£Œ: ìœ„í—˜ë„={fall_risk:.3f}, ì‹œê°„={inference_time}ms")
        
        return fall_risk, inference_time
    
    def get_recommended_action(self, fall_risk):
        """ìœ„í—˜ë„ì— ë”°ë¥¸ ê¶Œì¥ í–‰ë™"""
        if fall_risk > 0.8:
            return "EMERGENCY_STOP"  # ì¦‰ì‹œ ì •ì§€
        elif fall_risk > 0.6:
            return "SLOW_DOWN"       # ê°ì†
        elif fall_risk > 0.4:
            return "CAUTION"         # ì£¼ì˜
        else:
            return "CONTINUE"        # ê³„ì† ì§„í–‰
```

#### ì‹¤ì‹œê°„ ì¶”ë¡  í†µí•©
```python
# firmware/main.py (TinyML í†µí•©)

from ml_inference import FallDetectionModel
from hardware_interface import HardwareInterface
import time

class SmartRobot:
    """TinyML ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë¡œë´‡"""
    
    def __init__(self):
        self.hw = HardwareInterface()
        self.ml_model = FallDetectionModel()
        self.inference_interval = 100  # 100msë§ˆë‹¤ ì¶”ë¡ 
        self.last_inference_time = 0
    
    async def run_with_ml(self):
        """ML ê¸°ë°˜ ì•ˆì „ ì‹œìŠ¤í…œ"""
        while True:
            current_time = time.ticks_ms()
            
            # ì„¼ì„œ ì½ê¸°
            sensors = self.hw.read_all_sensors()
            
            # ì£¼ê¸°ì  ì¶”ë¡ 
            if time.ticks_diff(current_time, self.last_inference_time) > self.inference_interval:
                # ë‚™í•˜ ìœ„í—˜ë„ ì˜ˆì¸¡
                fall_risk, inference_time = self.ml_model.predict(
                    sensors['ir_front'],
                    sensors['ir_edge'],
                    sensors['encoder_left'],
                    sensors['encoder_right'],
                    self.hw.current_direction
                )
                
                # ê¶Œì¥ í–‰ë™
                action = self.ml_model.get_recommended_action(fall_risk)
                
                # ìë™ ì•ˆì „ ì œì–´
                if action == "EMERGENCY_STOP":
                    print("ML ìœ„í—˜ ê°ì§€: ê¸´ê¸‰ ì •ì§€!")
                    self.hw.emergency_stop()
                elif action == "SLOW_DOWN":
                    print("ML ì£¼ì˜: ì†ë„ ê°ì†Œ")
                    self.hw.set_speed(50)  # 50% ì†ë„
                
                # ì„œë²„ì— ì¶”ë¡  ê²°ê³¼ ì „ì†¡
                await self.send_ml_result(fall_risk, action, inference_time)
                
                self.last_inference_time = current_time
            
            await asyncio.sleep(0.01)  # 10ms
```

### 6ë‹¨ê³„: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ì¬í•™ìŠµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë° ì¬í•™ìŠµ íŒŒì´í”„ë¼ì¸                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ESP32 ì¶”ë¡  ê²°ê³¼    â†’     FastAPI ìˆ˜ì§‘     â†’     ì„±ëŠ¥ ë¶„ì„      â†’    ì¬í•™ìŠµ íŠ¸ë¦¬ê±°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¶”ë¡  ê²°ê³¼    â”‚   TCP   â”‚ ë¡œê·¸ ì €ì¥   â”‚  ë¶„ì„  â”‚ ì •í™•ë„   â”‚ if    â”‚ ì¬í•™ìŠµ    â”‚
â”‚ â€¢ ì˜ˆì¸¡ê°’     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ì˜ˆì¸¡ê°’    â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ì˜¤ë‹µë¥  â”‚ ì €í•˜  â”‚ â€¢ ë°ì´í„°  â”‚
â”‚ â€¢ ì‹¤ì œê°’     â”‚         â”‚ â€¢ ì‹¤ì œê°’    â”‚        â”‚ â€¢ ì§€ì—°   â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ ëª¨ë¸    â”‚
â”‚ â€¢ ì§€ì—°ì‹œê°„   â”‚         â”‚ â€¢ ì§€ì—°ì‹œê°„  â”‚        â”‚          â”‚       â”‚ â€¢ ë°°í¬    â”‚
â”‚ â€¢ ë©”ëª¨ë¦¬     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                     â”‚
                                â”‚                     â”‚
                                â–¼                     â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ ML ì„±ëŠ¥ DB  â”‚        â”‚ ëŒ€ì‹œë³´ë“œ â”‚
                        â”‚ â€¢ ì¶”ë¡  ë¡œê·¸ â”‚        â”‚ â€¢ ì°¨íŠ¸   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ í”„ë¡œí† ì½œ
```python
# ESP32 â†’ Server ì¶”ë¡  ê²°ê³¼ ì „ì†¡
{
    "type": "ml_inference",
    "timestamp": 1696780800000,
    "model_name": "fall_detection",
    "model_version": "v1.0",
    "input": {
        "ir_front": 512,
        "ir_edge": 800,
        "encoder_left": 120,
        "encoder_right": 118,
        "direction": 0
    },
    "prediction": {
        "fall_risk": 0.85,
        "recommended_action": "EMERGENCY_STOP"
    },
    "performance": {
        "inference_time_ms": 8,
        "memory_used_kb": 25,
        "cpu_usage_percent": 15
    },
    "actual_result": {
        "fall_occurred": true,  # ì‹¤ì œ ë‚™í•˜ ë°œìƒ ì—¬ë¶€
        "correct_prediction": true
    }
}

# Server DB ì €ì¥
CREATE TABLE ml_inference_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    model_name TEXT,
    model_version TEXT,
    input_data TEXT,              -- JSON
    predicted_risk REAL,
    recommended_action TEXT,
    actual_fall BOOLEAN,
    correct_prediction BOOLEAN,
    inference_time_ms REAL,
    memory_used_kb REAL,
    cpu_usage_percent REAL
);
```

#### ì„±ëŠ¥ ë¶„ì„ ë° ì¬í•™ìŠµ íŠ¸ë¦¬ê±°
```python
# backend/ml/performance_monitor.py

import sqlite3
import pandas as pd
from datetime import datetime, timedelta

class MLPerformanceMonitor:
    """ML ëª¨ë¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§"""
    
    def __init__(self, db_path='deks.db'):
        self.db_path = db_path
    
    def calculate_accuracy(self, days=7):
        """ìµœê·¼ Nì¼ê°„ ì •í™•ë„ ê³„ì‚°"""
        conn = sqlite3.connect(self.db_path)
        
        query = f"""
            SELECT 
                COUNT(*) as total,
                SUM(CASE WHEN correct_prediction = 1 THEN 1 ELSE 0 END) as correct
            FROM ml_inference_logs
            WHERE timestamp >= datetime('now', '-{days} days')
        """
        
        df = pd.read_sql_query(query, conn)
        conn.close()
        
        if df['total'][0] > 0:
            accuracy = df['correct'][0] / df['total'][0]
            return accuracy
        return 1.0
    
    def calculate_avg_latency(self, days=7):
        """í‰ê·  ì¶”ë¡  ì§€ì—°ì‹œê°„"""
        conn = sqlite3.connect(self.db_path)
        
        query = f"""
            SELECT AVG(inference_time_ms) as avg_latency
            FROM ml_inference_logs
            WHERE timestamp >= datetime('now', '-{days} days')
        """
        
        df = pd.read_sql_query(query, conn)
        conn.close()
        
        return df['avg_latency'][0] or 0.0
    
    def get_false_positives(self, days=7, limit=100):
        """ì˜¤íƒ ì¼€ì´ìŠ¤ ìˆ˜ì§‘ (ì¬í•™ìŠµ ë°ì´í„°)"""
        conn = sqlite3.connect(self.db_path)
        
        query = f"""
            SELECT input_data, predicted_risk, actual_fall
            FROM ml_inference_logs
            WHERE correct_prediction = 0
              AND timestamp >= datetime('now', '-{days} days')
            LIMIT {limit}
        """
        
        df = pd.read_sql_query(query, conn)
        conn.close()
        
        return df
    
    def should_retrain(self):
        """ì¬í•™ìŠµ í•„ìš” ì—¬ë¶€ íŒë‹¨"""
        accuracy = self.calculate_accuracy(days=7)
        latency = self.calculate_avg_latency(days=7)
        
        # ì¬í•™ìŠµ ì¡°ê±´
        if accuracy < 0.90:  # ì •í™•ë„ 90% ë¯¸ë§Œ
            print(f"ì¬í•™ìŠµ í•„ìš”: ì •í™•ë„ ì €í•˜ ({accuracy:.2%})")
            return True, "low_accuracy"
        
        if latency > 50:  # ì§€ì—° 50ms ì´ˆê³¼
            print(f"ì¬í•™ìŠµ í•„ìš”: ì§€ì—°ì‹œê°„ ì¦ê°€ ({latency:.2f}ms)")
            return True, "high_latency"
        
        return False, None
    
    def trigger_retraining(self):
        """ì¬í•™ìŠµ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰"""
        print("ì¬í•™ìŠµ ì‹œì‘...")
        
        # 1. ì˜¤ë‹µ ì¼€ì´ìŠ¤ ìˆ˜ì§‘
        false_cases = self.get_false_positives(days=30, limit=500)
        print(f"ì˜¤ë‹µ ì¼€ì´ìŠ¤: {len(false_cases)}ê°œ")
        
        # 2. ê¸°ì¡´ ë°ì´í„°ì™€ ë³‘í•©
        # 3. ëª¨ë¸ ì¬í•™ìŠµ
        from backend.ml.train_fall_detection import train_model
        model, scaler = train_model()
        
        # 4. ëª¨ë¸ ë³€í™˜
        from backend.ml.convert_to_tflite import convert_to_tflite
        convert_to_tflite('models/fall_detection.h5', 
                         'models/fall_detection_v2.tflite')
        
        # 5. ESP32ì— OTA ì—…ë°ì´íŠ¸
        print("ìƒˆ ëª¨ë¸ì„ ESP32ì— ë°°í¬í•˜ì„¸ìš”")
        
        return True

# ì£¼ê¸°ì  ëª¨ë‹ˆí„°ë§ (FastAPI ë°±ê·¸ë¼ìš´ë“œ íƒœìŠ¤í¬)
async def periodic_performance_check():
    """ì£¼ê¸°ì  ì„±ëŠ¥ ì ê²€"""
    monitor = MLPerformanceMonitor()
    
    while True:
        should_retrain, reason = monitor.should_retrain()
        
        if should_retrain:
            print(f"ì¬í•™ìŠµ íŠ¸ë¦¬ê±°: {reason}")
            monitor.trigger_retraining()
        
        # 24ì‹œê°„ë§ˆë‹¤ ì ê²€
        await asyncio.sleep(24 * 3600)
```

#### ëŒ€ì‹œë³´ë“œ ì‹œê°í™”
```python
# backend/api/v1/endpoints/ml_dashboard.py

from fastapi import APIRouter
from typing import List, Dict
import sqlite3

router = APIRouter()

@router.get("/ml/performance")
async def get_ml_performance():
    """ML ëª¨ë¸ ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ"""
    monitor = MLPerformanceMonitor()
    
    return {
        "accuracy_7days": monitor.calculate_accuracy(days=7),
        "accuracy_30days": monitor.calculate_accuracy(days=30),
        "avg_latency_ms": monitor.calculate_avg_latency(days=7),
        "total_inferences": get_total_inferences(),
        "model_version": "v1.0",
        "last_retrain": get_last_retrain_date()
    }

@router.get("/ml/inference_history")
async def get_inference_history(limit: int = 100):
    """ìµœê·¼ ì¶”ë¡  ê²°ê³¼ ì´ë ¥"""
    conn = sqlite3.connect('deks.db')
    
    query = f"""
        SELECT timestamp, predicted_risk, actual_fall, 
               correct_prediction, inference_time_ms
        FROM ml_inference_logs
        ORDER BY timestamp DESC
        LIMIT {limit}
    """
    
    df = pd.read_sql_query(query, conn)
    conn.close()
    
    return df.to_dict(orient='records')
```

## ğŸ”„ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥ (2025-10-08 ê¸°ì¤€)
1. âœ… **ESP32 í•˜ë“œì›¨ì–´ ì—°ë™**: ì™„ì „í•œ ì†Œí”„íŠ¸ì›¨ì–´ í†µí•© ì™„ë£Œ
2. âœ… **ì‹¤ì‹œê°„ í†µì‹ **: Socket Bridge + WebSocket ì–‘ë°©í–¥ í†µì‹ 
3. âœ… **ìì—°ì–´ ì²˜ë¦¬**: ê·œì¹™ ê¸°ë°˜ NLP ì‹œìŠ¤í…œ
4. âœ… **ì—ëŸ¬ ì²˜ë¦¬**: 40+ ì»¤ìŠ¤í…€ ì˜ˆì™¸, ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬
5. âœ… **ëŒ€í™” ì‹œìŠ¤í…œ**: ì¥ê¸° ê¸°ì–µ + 16ê°œ ê°ì • ìƒíƒœ
6. âœ… **Analytics**: ì‚¬ìš©ì íŒ¨í„´ ë¶„ì„ ë° ìŠ¤ë§ˆíŠ¸ ì œì•ˆ
7. âœ… **Expression**: LED/ë²„ì € ì œì–´ ë° ìë™ í‘œí˜„

### í–¥í›„ í™•ì¥ ê³„íš (ìš°ì„ ìˆœìœ„ 7~10)
1. **TinyML ë„ì…** (7ìˆœìœ„, 2025 Q4)
   - ì˜¨ë””ë°”ì´ìŠ¤ ML ëª¨ë¸ ì¶”ë¡ 
   - ìŒì„± ëª…ë ¹ ì¸ì‹ (I2S MEMS ë§ˆì´í¬)
   - ë‚™í•˜ ìœ„í—˜ ì˜ˆì¸¡ ëª¨ë¸
   - **ìƒíƒœ**: ê³„íš ë‹¨ê³„

2. **í™˜ê²½ ë§¤í•‘ ë° SLAM** (8ìˆœìœ„)
   - ì„¼ì„œ ìœµí•© ê¸°ë°˜ ë§¤í•‘
   - ì‹¤ì‹œê°„ ì§€ë„ ì‘ì„±
   - ìœ„ì¹˜ ì¶”ì • ë° ì¶”ì 
   - **ìƒíƒœ**: ë¯¸ê°œë°œ

3. **ê²½ë¡œ ê³„íš ë° ììœ¨ íƒì‚¬** (9ìˆœìœ„)
   - A*/RRT ê²½ë¡œ ê³„íš
   - ììœ¨ì  í™˜ê²½ íƒìƒ‰
   - **ìƒíƒœ**: ë¯¸ê°œë°œ

4. **ìŠ¤ë§ˆíŠ¸ í™ˆ ì—°ë™** (10ìˆœìœ„)
   - MQTT í”„ë¡œí† ì½œ í†µí•©
   - IoT ê¸°ê¸° ì œì–´
   - í™ˆ ì˜¤í† ë©”ì´ì…˜
   - **ìƒíƒœ**: ë¯¸ê°œë°œ

5. **ë©€í‹° ë¡œë´‡ ì§€ì›** (í–¥í›„)
   - ì—¬ëŸ¬ Deks ë¡œë´‡ ë™ì‹œ ì œì–´
   - ë¡œë´‡ ê°„ í˜‘ì—…
   - **ìƒíƒœ**: ë¯¸ê°œë°œ

6. **í´ë¼ìš°ë“œ ì—°ë™** (í–¥í›„)
   - ì›ê²© ëª¨ë‹ˆí„°ë§ ë° ì œì–´
   - ë°ì´í„° ë°±ì—… ë° ë™ê¸°í™”
   - **ìƒíƒœ**: ë¯¸ê°œë°œ

### ëª¨ë“ˆí™” ì„¤ê³„
- âœ… ê° ì»´í¬ë„ŒíŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ êµì²´ ê°€ëŠ¥
- âœ… API ê¸°ë°˜ í†µì‹ ìœ¼ë¡œ ëŠìŠ¨í•œ ê²°í•©
- âœ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì ìš© ê°€ëŠ¥
- ğŸ”® TinyML ëª¨ë¸ OTA ì—…ë°ì´íŠ¸ ì§€ì› (í–¥í›„)

---

**Deks 1.0 ì•„í‚¤í…ì²˜** - í™•ì¥ ê°€ëŠ¥í•˜ê³  ì•ˆì „í•˜ë©° ì§€ëŠ¥ì ì¸ ë¡œë´‡ í”Œë«í¼
